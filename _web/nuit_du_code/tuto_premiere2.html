<!DOCTYPE html>

<html>

	

<head>

		<meta charset="UTF-8">
		<meta name="Content-Type" content="UTF-8">
		<meta name="Content-Language" content="fr">
		<meta name="Subject" content="nsi">
		<title>Tuto Première</title>
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/prism.css" />	
	
	</head>
	
	
	<body>

		
		<header>

		
		<div id="header-titre">
			<span>NDC - Claveille</span>
		</div>
			
		<ul id="header-menu">
			<li><a href="index-2.html">Accueil</a></li>
			<li><a href="ref_pyxel.html">Référence Pyxel</a></li>
			<li><a href="tuto_premiere1.html">Tuto Première ( sans POO )</a></li>
			<li><a href="tuto_terminale1.html">Tuto Terminale ( avec POO )</a></li>
			
		</ul>
	
</header>
		<nav id="menu_fixe">
	<p><strong>TUTORIEL<br>Première</strong></p>
	<ol>
		<li><a href="tuto_premiere1.html">Créer une application</a></li>
		<li><a href="tuto_premiere2.html">Interactions utilisateur</a></li>
		<li><a href="tuto_premiere3.html">Des acteurs multiples</a></li>
		<li><a href="tuto_premiere4.html">Gérer des collisions</a></li>
		<li><a href="tuto_premiere5.html">Utiliser des images</a></li>
		<li><a href="tuto_premiere6.html">Utiliser des sons</a></li>
		<li><a href="tuto_premiere7.html">Décors et scrolling</a></li>
	</ol>
</nav>	
		
		<div id="super-div">
			<div id="bloc-sommaire">
				<div id="sommaire"></div>			
			</div>
			<section class="contenu_1">
			
			<h1>Tuto 2 : interactions avec l'utilisateur</h1>

			<h2>Clavier</h2>
			
			<p>Pyxel peut détecter l'appui sur une touche du clavier et détecter de quelle touche il s'agit.</p>
			
			<p>Deux méthodes de Pyxel sont utilisables :</p>
			
			<ul>
				<li><code>btn(code_touche)</code> : renvoie un booléen si la touche désignée par le code <var>code_touche</var> a été appuyée pendant la <em>frame</em> courante</li>
				<li><code>btnr(code_touche)</code> : idem, mais en évitant les répétitions associées au maintien appuyé d'une touche</li>
			</ul>
			
			<p>La première méthode sera utilisée lorsqu'une touche sera a priori maintenue appuyée, comme une touche de direction par exemple, et la deuxième quand un seul appui est souhaitable, comme le 
			déclenchement d'un tir par exemple ou une action unique.</p>
			
			<p>Ces méthodes seront appelées dans la fonction <code>update()</code>.</p>
			
			<p>Voir la référence Pyxel pour le code des touches.</p>
			
			<p>Voila par exemple un script qui permet de déplacer un carré dans la fenêtre à l'aide des 4 touches de direction :</p>
			
			<div class="bloc_image">
				<figure>
					<img src="img/pyxel-tutoriel-01.gif" alt="Tuto 1" />				
				</figure>			
			</div>
			
			<pre><code class="language-python">
import pyxel

pyxel.init(128, 128, title="Super Jeu")

###############################
# FONCTIONS GÉRANT LE VAISSEAU #
###############################

def bouge_vaisseau():
    """déplacement avec les touches de directions"""

    global vaisseau_x, vaisseau_y

    if pyxel.btn(pyxel.KEY_RIGHT):  # équivaut à : if pyxel.btn(pyxel.KEY_RIGHT) == True:
        if (vaisseau_x < 120) :
            vaisseau_x = vaisseau_x + 1
    if pyxel.btn(pyxel.KEY_LEFT):
        if (vaisseau_x > 0) :
            vaisseau_x = vaisseau_x - 1
    if pyxel.btn(pyxel.KEY_DOWN):
        if (vaisseau_y < 120) :
            vaisseau_y = vaisseau_y + 1
    if pyxel.btn(pyxel.KEY_UP):
        if (vaisseau_y > 0) :
            vaisseau_y = vaisseau_y - 1

def affiche_vaisseau():

    # vaisseau (carre 8x8)
    pyxel.rect(vaisseau_x, vaisseau_y, 8, 8, 1)

##################
# GESTION DU JEU #
##################

def update():

    bouge_vaisseau()

def draw():

    pyxel.cls(0)

    affiche_vaisseau()

########################
#  PROGRAMME PRINCIPAL #
########################

# position initiale du vaisseau
# (origine des positions : coin haut gauche)
vaisseau_x = 60
vaisseau_y = 60

# Lancement du jeu
pyxel.run(update, draw)	
			</code></pre>
			
			
			<h2>Souris</h2>			

			<p>Les attributs <var>mouse_x</var> et <var>mouse_y</var> du module Pyxel permettent de connaître les coordonnées actuelle de la souris.</p>

			<p>La méthode <code>mouse(True/False)</code> permet d'afficher/ne pas afficher le curseur de la souris ( <code>False</code> = ne pas afficher par défaut ).</p>

			<h2>A faire soi-même</h2>

	<div class="travail">
			<ul>
				<li>modifier les touches à utiliser pour déplacer le "vaisseau".</li>			
				<li>Modifier le script pour contrôler le "vaisseau" avec la souris.</li>
			</ul>
	</div>
			
			<a href="tuto_premiere3.html">Suivant</a>
			
			</section>
		</div>
	
	<script type="text/javascript" src="../js/sommaire.js"></script>	
	<script type="text/javascript" src="../js/prism.js"></script>		
	</body>



</html>
